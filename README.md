# 21點計牌器

使用 Wong Halves 系統與 8 副牌基本策略的 21 點算牌桌面應用程式，配備現代化 PyQt6 深色主題介面。

## 功能特色

- **Wong Halves 算牌系統**：專業等級的算牌系統，使用分數點值
- **基本策略引擎**：針對 8 副牌遊戲的最佳玩法建議（莊家軟 17 停牌）
- **即時計數顯示**：顯示流水計數、真實計數與剩餘牌組數
- **現代化深色介面**：賭場風格的 PyQt6 介面，配備動畫效果
- **視覺化元件**：LCD 數字顯示器、動畫進度條、彩色編碼系統
- **多手牌支持**：完整支持分牌後的多手牌管理
- **鍵盤快捷鍵**：S 鍵停牌、P 鍵分牌

## 使用方式

1. 輸入出現的牌：
   - 使用分頁切換「玩家手牌」、「莊家明牌」或「其他玩家」
   - 點擊牌按鈕（A、2-10、J、Q、K）來輸入牌
   - 特殊牌（A、K、Q、J）有獨特的顏色標示

2. 查看建議：
   - 中央大螢幕顯示建議動作，並用顏色編碼
   - LCD 數字顯示器即時顯示真實計數
   - 優勢指示器顯示玩家/莊家優勢

3. 控制功能：
   - **停牌 (S)**：當前手牌停牌，切換到下一手牌
   - **分牌 (P)**：當可以分牌時啟用
   - **清除手牌**：重置當前手牌（保留計數）
   - **新牌靴**：開始新的 8 副牌牌靴（重置計數）

## Wong Halves 點值

- 2、7：+0.5
- 3、4、6：+1.0
- 5：+1.5
- 8：0
- 9：-0.5
- 10、J、Q、K、A：-1.0

## 真實計數

真實計數 = 流水計數 ÷ 剩餘牌組數

- 正計數（特別是 +2 或更高）對玩家有利
- 負計數對莊家有利

## 系統需求

- Python 3.8+
- PyQt6（現代化 GUI 框架）
- PyYAML（用於載入策略配置）
- Linux 用戶：需要 libxcb-cursor0

## 安裝

### 方法一：使用 pip 安裝專案（推薦）
```bash
# 在專案目錄中
pip install -e .

# Linux 用戶可能需要：
sudo apt install libxcb-cursor0

# 然後執行
blackjack-counter
# 或使用 make
make run
```

### 方法二：直接安裝依賴項
```bash
pip install pyyaml PyQt6
python3 scripts/run_app.py
```

### 開發環境設置
如果您想要修改程式碼，可以安裝開發依賴項：
```bash
pip install -e ".[dev]"
```

## 基本策略說明

此應用程式實現了完整的基本策略，包括：

### 硬牌（無 A 或 A 算作 1）
- 根據玩家總點數和莊家明牌給出最佳決策

### 軟牌（A 算作 11）
- 處理包含 A 的手牌的特殊策略

### 對子
- 決定何時該分牌的策略

### 策略配置
基本策略現在儲存在 `strategy.yaml` 檔案中，您可以：
- 輕鬆查看和修改策略表格
- 調整不同規則變化（如莊家軟17要牌）
- 新增自訂策略變體

## 顏色編碼

### 計數顏色：
- 深綠色：真實計數 ≥ +2（強烈玩家優勢）
- 綠色：真實計數 ≥ +1（玩家優勢）
- 黑色：中性
- 紅色：真實計數 ≤ -1（莊家優勢）
- 深紅色：真實計數 ≤ -2（強烈莊家優勢）

### 決策顏色：
- 藍色：要牌
- 綠色：停牌
- 橙色：加倍
- 紫色：分牌
- 紅色：投降
- 深紅色：爆牌